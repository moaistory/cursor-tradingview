# 볼린저 밴드 돌파 반전 전략 (Bollinger Band Breakout Reversal Strategy)

## 전략 개요
이 전략은 볼린저 밴드(Bollinger Bands)의 돌파 후 반전 패턴을 포착하는 양방향 거래 전략입니다. 밴드 돌파 후 재진입하는 패턴을 활용하여 반전을 예측하는 전략입니다.

## 전략 파라미터
- **볼린저 밴드 기간**: 20 (이동평균 기간)
- **볼린저 밴드 표준편차**: 2.0 (밴드 폭 조절)

## 매매 조건

### 숏(Short) 포지션
**진입 조건:**
1. 직전봉이 상단 안에서 위로 뚫는 양봉
2. 현재봉이 상단 밖에서 안으로 들어오는 음봉

**청산 조건:**
- 중간선 아래에 있다가 중간선 위로 올라갈 때

### 롱(Long) 포지션
**진입 조건:**
1. 직전봉이 하단 안에서 아래로 뚫는 음봉
2. 현재봉이 하단 밖에서 안으로 들어오는 양봉

**청산 조건:**
- 중간선 위에 있다가 중간선 아래로 내려갈 때

## 전략 로직

### 볼린저 밴드 계산
```pine
bb_basis = ta.sma(close, 20)  // 20기간 이동평균
bb_dev = 2.0 * ta.stdev(close, 20)  // 표준편차
bb_upper = bb_basis + bb_dev  // 상단선
bb_lower = bb_basis - bb_dev  // 하단선
```

### 숏 진입 조건 분석
1. **직전봉 상단 돌파**: `close[1] > bb_upper[1] and open[1] <= bb_upper[1]`
   - 직전봉이 상단 안에서 위로 뚫음

2. **직전봉 양봉**: `close[1] > open[1]`
   - 직전봉이 양봉이어야 함

3. **현재봉 상단 재진입**: `close < bb_upper and open > bb_upper`
   - 현재봉이 상단 밖에서 안으로 들어옴

4. **현재봉 음봉**: `close < open`
   - 현재봉이 음봉이어야 함

### 롱 진입 조건 분석
1. **직전봉 하단 돌파**: `close[1] < bb_lower[1] and open[1] >= bb_lower[1]`
   - 직전봉이 하단 안에서 아래로 뚫음

2. **직전봉 음봉**: `close[1] < open[1]`
   - 직전봉이 음봉이어야 함

3. **현재봉 하단 재진입**: `close > bb_lower and open < bb_lower`
   - 현재봉이 하단 밖에서 안으로 들어옴

4. **현재봉 양봉**: `close > open`
   - 현재봉이 양봉이어야 함

### 청산 조건 분석
- **롱 청산**: 중간선 위에 있다가 중간선 아래로 내려갈 때
- **숏 청산**: 중간선 아래에 있다가 중간선 위로 올라갈 때

## 시각적 표시

### 차트 표시
- **중간선**: 파란색 (20기간 이동평균)
- **상단선**: 빨간색 (상단 밴드)
- **하단선**: 초록색 (하단 밴드)
- **밴드 영역**: 연한 파란색으로 채움

### 배경색 표시
- **초록색**: 롱 매수 신호
- **빨간색**: 숏 매수 신호
- **주황색**: 롱 청산 신호
- **보라색**: 숏 청산 신호

### 정보 테이블
우상단에 현재 전략 상태를 표시하는 테이블이 표시됩니다:
- 전략명
- 진입/청산 조건
- 현재 포지션 상태

## 사용법

1. TradingView에서 Pine Editor 열기
2. `bollinger_long_strategy.pine` 파일의 코드를 복사하여 붙여넣기
3. 차트에 적용
4. 전략 테스터에서 백테스팅 실행

## 전략의 특징

### 장점
- **반전 포착**: 돌파 후 재진입으로 반전 신호 포착
- **명확한 조건**: 4가지 조건을 모두 만족해야 진입
- **양방향 거래**: 상승/하락 반전 모두 포착
- **중간선 기준 청산**: 명확한 청산 기준 제공

### 단점
- **신호 빈도**: 조건이 엄격하여 신호가 적을 수 있음
- **후행성**: 이미 반전이 시작된 후 진입
- **변동성 의존**: 높은 변동성에서만 효과적

## 리스크 관리

### 주의사항
- 변동성이 높은 시장에서 효과적
- 횡보장에서는 신호 과다 발생 가능
- 적절한 손절매 설정 권장

### 최적화 가능한 파라미터
- 볼린저 밴드 기간 (현재 20)
- 표준편차 배수 (현재 2.0)
- 청산 기준선 (현재 중간선)

## 백테스팅 권장사항

### 테스트 환경
- 다양한 시장 환경에서 테스트
- 거래 비용과 슬리피지 고려
- 리스크 대비 수익률 분석

### 성능 지표 확인
- 총 수익률
- 승률
- 최대 낙폭(MDD)
- 샤프 비율
- 평균 보유 기간

## 개선 방향

1. **추가 필터링**
   - 거래량 조건 추가
   - RSI, MACD 등 보조지표 결합
   - 시간대 필터링

2. **동적 파라미터**
   - 변동성에 따른 표준편차 조정
   - 시장 상황별 진입 조건 조정

3. **리스크 관리 강화**
   - 동적 손절매 설정
   - 포지션 사이징
   - 최대 보유 기간 설정

## 시장 상황별 대응

### 변동성 높은 시장
- 전략이 가장 효과적
- 돌파 후 재진입 패턴 활용

### 횡보장
- 신호 과다 발생 주의
- 추가 필터링 필요

### 강한 추세장
- 반전 신호 신중하게 해석
- 리스크 관리 강화 